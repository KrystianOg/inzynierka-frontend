import{u as _,a as T,o as q,q as C,t as W,v as L,j as a,C as k,b as e,W as A,w as c,T as F,L as g,I as j,x as B,F as z,y as O}from"./index-9cd92da0.js";import{T as p,B as h}from"./Rounded-57c29091.js";import{u as Q}from"./index.esm-9a844ecf.js";import{A as D}from"./Avatar-685672a1.js";import"./browser-ponyfill-f1f1b475.js";import"./TextField-93489492.js";import"./Grow-3f1f88f3.js";import"./Button-ab6e28d6.js";const R=()=>{var d,u;const{t:r}=_(),f=T(),o=q(),t=((u=(d=f.state)==null?void 0:d.from)==null?void 0:u.pathname)||"/",{enqueueSnackbar:s}=C(),[w,{isLoading:x}]=W(),[S]=L(),{register:m,formState:{errors:i},handleSubmit:y}=Q(),v=async l=>{const{error:n,isSuccess:I}=await w(l);n&&(console.log(n),n==="Invalid login credentials"?s(r("error.invalid_login_credentials"),{variant:"error"}):n==="Email not confirmed"&&s(r("error.email_not_confirmed"),{variant:"error"})),I&&o(t,{replace:!0})},b=async()=>{const{error:l,isSuccess:n}=await S({provider:"google"});l&&s(r("error.something_went_wrong"),{variant:"error"}),n&&o(t,{replace:!0})};return a(k,{component:"main",maxWidth:"xs",children:[e(A,{children:e("title",{children:r("signin.title")})}),a(c,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e(D,{sx:{m:1,bgcolor:"transparent"}}),e(F,{component:"h1",variant:"h5",children:r("signin.title")}),a(c,{component:"form",onSubmit:y(v),sx:{mt:1},children:[e(p,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:r("signin.email_address"),autoComplete:"email",autoFocus:!0,...m("email",{required:r("signin.email_required").toString()}),helperText:i.email&&String(i.email.message),error:!!i.email}),e(p,{margin:"normal",required:!0,fullWidth:!0,label:r("signin.password"),type:"password",id:"password",autoComplete:"current-password",...m("password",{required:r("signin.password_required").toString()}),helperText:i.password&&String(i.password.message),error:!!i.password}),e(h,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:r("signin.title")})]}),e("p",{children:r("signin.or")}),e(h,{variant:"contained",fullWidth:!0,onClick:b,children:r("signin.with_google")}),a(c,{sx:{display:"flex",justifyContent:"space-between",width:"100%",margin:"0.5rem"},children:[e(g,{href:"/restore-password",children:r("signin.forgot_password")}),e(g,{href:"/signup",children:r("signin.no_account")})]}),e(j,{color:"primary","aria-label":"close",sx:{marginTop:"3rem"},onClick:()=>o(t,{replace:!0}),children:x?e(B,{}):e(z,{icon:O})})]})]})};export{R as default};
