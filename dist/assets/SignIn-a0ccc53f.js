import{u as _,a as T,q,t as C,v as W,w as k,j as t,C as L,b as e,W as A,o as c,T as F,L as g,I as j,x as B,F as z,y as O}from"./index-256b35f3.js";import{T as p,B as h}from"./Rounded-f7f85572.js";import{u as Q}from"./index.esm-22fccc69.js";import{A as D}from"./Avatar-67d11fcb.js";import"./browser-ponyfill-dc401b36.js";import"./TextField-0b6183c3.js";import"./Grow-567cf039.js";import"./Button-e91f9ba3.js";const R=()=>{var d,u;const{t:r}=_(),f=T(),o=q(),s=((u=(d=f.state)==null?void 0:d.from)==null?void 0:u.pathname)||"/",{enqueueSnackbar:n}=C(),[w,{isLoading:x}]=W(),[S]=k(),{register:m,formState:{errors:i},handleSubmit:y}=Q(),v=async l=>{const{error:a,isSuccess:I}=await w(l);I?o(s,{replace:!0}):a==="Invalid login credentials"?n(r("error.invalid_login_credentials"),{variant:"error"}):a==="Email not confirmed"?n(r("error.email_not_confirmed"),{variant:"error"}):n(r("error.unknown"),{variant:"error"})},b=async()=>{const{error:l,isSuccess:a}=await S({provider:"google"});l&&n(r("error.something_went_wrong"),{variant:"error"}),a&&o(s,{replace:!0})};return t(L,{component:"main",maxWidth:"xs",children:[e(A,{children:e("title",{children:r("signin.title")})}),t(c,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e(D,{sx:{m:1,bgcolor:"transparent"}}),e(F,{component:"h1",variant:"h5",children:r("signin.title")}),t(c,{component:"form",onSubmit:y(v),sx:{mt:1},children:[e(p,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:r("signin.email_address"),autoComplete:"email",autoFocus:!0,...m("email",{required:r("signin.email_required").toString()}),helperText:i.email&&String(i.email.message),error:!!i.email}),e(p,{margin:"normal",required:!0,fullWidth:!0,label:r("signin.password"),type:"password",id:"password",autoComplete:"current-password",...m("password",{required:r("signin.password_required").toString()}),helperText:i.password&&String(i.password.message),error:!!i.password}),e(h,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:r("signin.title")})]}),e("p",{children:r("signin.or")}),e(h,{variant:"contained",fullWidth:!0,onClick:b,children:r("signin.with_google")}),t(c,{sx:{display:"flex",justifyContent:"space-between",width:"100%",margin:"0.5rem"},children:[e(g,{href:"/restore-password",children:r("signin.forgot_password")}),e(g,{href:"/signup",children:r("signin.no_account")})]}),e(j,{color:"primary","aria-label":"close",sx:{marginTop:"3rem"},onClick:()=>o(s,{replace:!0}),children:x?e(B,{}):e(z,{icon:O})})]})]})};export{R as default};
