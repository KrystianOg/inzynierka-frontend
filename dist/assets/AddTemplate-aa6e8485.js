import{$ as _,r as g,b as e,F as f,aJ as b,aN as y,u as S,aO as V,o as q,af as F,j as u,ag as d,W as I,ah as A,w as D,x as W}from"./index-9cd92da0.js";import{u as j}from"./index.esm-9a844ecf.js";import{T as c}from"./TextField-93489492.js";import{I as w,W as B}from"./enum-6daa183a.js";import{M as $}from"./MenuItem-327b52d1.js";import{u as z,q as E}from"./index-bd3634b1.js";import{a as L}from"./templates-531e0210.js";import{S as s}from"./Skeleton-2f446f94.js";import{B as M}from"./Button-ab6e28d6.js";import"./browser-ponyfill-f1f1b475.js";import"./Grow-3f1f88f3.js";const o=({register:t,...r})=>{const l=_(),[i,a]=g.useState(!0);return e(c,{variant:"outlined",disabled:i,...r,InputProps:{endAdornment:e(w,{position:"end",style:{display:"flex",flexDirection:"row",gap:"1rem"},children:e(f,{icon:i?b:y,size:"lg",style:{color:l.palette.primary.main,cursor:"pointer"},onClick:()=>a(m=>!m)})})},inputProps:{min:0,...r.inputProps},...t(r.name,{required:r.required})})},h=({options:t,...r})=>{const l=_(),[i,a]=g.useState(!0);return e(c,{select:!0,variant:"outlined",disabled:i,...r,InputProps:{endAdornment:e(w,{position:"end",style:{display:"flex",flexDirection:"row",marginRight:"1.5rem",gap:"1rem"},children:e(f,{icon:i?b:y,size:"lg",style:{color:l.palette.primary.main,cursor:"pointer"},onClick:()=>a(m=>!m)})})},inputProps:{min:0,...r.inputProps},children:t==null?void 0:t.map(m=>e($,{value:m,children:m},m))})},Z=()=>{const{t}=S(),{type:r}=V(),l=q(),{user:i}=F(),{data:a,isLoading:m}=z((i==null?void 0:i.id)??E.skipToken),[v,{isLoading:T}]=L(),{register:n,handleSubmit:P,setError:k}=j(),C=async p=>{if(!i)return;console.log(p);const x=await v({...p,user_id:i==null?void 0:i.id});"error"in x&&k("name",{type:"manual",message:t("error.something_went_wrong").toString()}),"data"in x&&l("/templates")};return u(d,{children:[e(I,{title:`${t("templates.add_title")} ${r??""}| Diet Genius`}),e(A,{flexDirection:"column",gap:"1rem",children:u(D,{component:"form",sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:"1rem",width:"100%"},onSubmit:P(C),maxWidth:"sm",children:[e(c,{sx:{gridColumn:"1 / -1",marginTop:{xs:"1rem",sm:"2rem"},marginBottom:"1rem"},label:t("templates.your_name"),autoFocus:!0,...n("name",{required:!1})}),m?u(d,{children:[e(s,{animation:"wave",sx:{width:"100%",height:"56px"}}),e(s,{animation:"wave",height:56}),e(s,{animation:"wave",height:56}),e(s,{animation:"wave",height:56}),e("div",{}),e(s,{animation:"wave",height:56}),e(s,{animation:"wave",height:56}),e(s,{animation:"wave",height:56}),e(s,{animation:"wave",height:56}),e(s,{animation:"wave",height:56})]}):u(d,{children:[e(o,{label:t("profile.preferences.max_ready_time"),type:"number",defaultValue:a==null?void 0:a.max_ready_time,fullWidth:!0,register:n,name:"max_ready_time"}),e(h,{label:t("profile.preferences.workout"),defaultValue:a==null?void 0:a.workout,options:Object.keys(B),...n("workout",{required:!1})}),e(h,{label:t("profile.preferences.daily_meal_count"),defaultValue:a==null?void 0:a.daily_meal_count,options:[1,2,3,4,5],...n("meal_count",{required:!1})}),e("div",{}),e(o,{label:t("profile.min_max.min_calories"),type:"number",defaultValue:a==null?void 0:a.min_calories,inputProps:{min:0,max:3e3,step:25},register:n,name:"min_calories"}),e(o,{label:t("profile.min_max.max_calories"),type:"number",defaultValue:a==null?void 0:a.max_calories,inputProps:{min:0,max:3e3,step:25},register:n,name:"max_calories"}),e(o,{label:t("profile.min_max.min_protein"),type:"number",defaultValue:a==null?void 0:a.min_protein,register:n,name:"min_protein"}),e(o,{label:t("profile.min_max.max_protein"),type:"number",defaultValue:a==null?void 0:a.max_protein,register:n,name:"max_protein"}),e(o,{label:t("profile.min_max.min_carbs"),type:"number",defaultValue:a==null?void 0:a.min_carbs,register:n,name:"min_carbs"}),e(o,{label:t("profile.min_max.max_carbs"),type:"number",defaultValue:a==null?void 0:a.max_carbs,register:n,name:"max_carbs"})]}),e(M,{variant:"contained",type:"submit",sx:{gridColumn:"1 / -1",marginTop:"1rem"},children:T?e(W,{size:24}):t("templates.create")})]})})]})};export{Z as default};
