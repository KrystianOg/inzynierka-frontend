import{R as $}from"./index-45114418.js";var ue=e=>e.type==="checkbox",Z=e=>e instanceof Date,C=e=>e==null;const Ge=e=>typeof e=="object";var p=e=>!C(e)&&!Array.isArray(e)&&Ge(e)&&!Z(e),fr=e=>p(e)&&e.target?ue(e.target)?e.target.checked:e.target.value:e,dr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,yr=(e,i)=>e.has(dr(i)),le=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,f=(e,i,s)=>{if(!i||!p(e))return s;const o=le(i.split(/[,[\].]+?/)).reduce((t,l)=>C(t)?t:t[l],e);return k(o)||o===e?k(e[i])?s:e[i]:o};const Be={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},N={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},W={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};$.createContext(null);var hr=(e,i,s,o=!0)=>{const t={defaultValues:i._defaultValues};for(const l in e)Object.defineProperty(t,l,{get:()=>{const h=l;return i._proxyFormState[h]!==N.all&&(i._proxyFormState[h]=!o||N.all),s&&(s[h]=!0),e[h]}});return t},U=e=>p(e)&&!Object.keys(e).length,gr=(e,i,s,o)=>{s(e);const{name:t,...l}=e;return U(l)||Object.keys(l).length>=Object.keys(i).length||Object.keys(l).find(h=>i[h]===(!o||N.all))},we=e=>Array.isArray(e)?e:[e];function vr(e){const i=$.useRef(e);i.current=e,$.useEffect(()=>{const s=!e.disabled&&i.current.subject.subscribe({next:i.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var P=e=>typeof e=="string",Ar=(e,i,s,o,t)=>P(e)?(o&&i.watch.add(e),f(s,e,t)):Array.isArray(e)?e.map(l=>(o&&i.watch.add(l),f(s,l))):(o&&(i.watchAll=!0),s),Vr=e=>{const i=e.constructor&&e.constructor.prototype;return p(i)&&i.hasOwnProperty("isPrototypeOf")},Ee=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function J(e){let i;const s=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ee&&(e instanceof Blob||e instanceof FileList))&&(s||p(e)))if(i=s?[]:{},!Array.isArray(e)&&!Vr(e))i=e;else for(const o in e)i[o]=J(e[o]);else return e;return i}var _r=(e,i,s,o,t)=>i?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[o]:t||!0}}:{},Se=e=>/^\w*$/.test(e),Je=e=>le(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,i,s){let o=-1;const t=Se(i)?[i]:Je(i),l=t.length,h=l-1;for(;++o<l;){const g=t[o];let E=s;if(o!==h){const b=e[g];E=p(b)||Array.isArray(b)?b:isNaN(+t[o+1])?{}:[]}e[g]=E,e=e[g]}return e}const me=(e,i,s)=>{for(const o of s||Object.keys(e)){const t=f(e,o);if(t){const{_f:l,...h}=t;if(l&&i(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else p(h)&&me(h,i)}}};var Ie=e=>({isOnSubmit:!e||e===N.onSubmit,isOnBlur:e===N.onBlur,isOnChange:e===N.onChange,isOnAll:e===N.all,isOnTouch:e===N.onTouched}),Pe=(e,i,s)=>!s&&(i.watchAll||i.watch.has(e)||[...i.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length)))),br=(e,i,s)=>{const o=le(f(e,s));return w(o,"root",i[s]),w(e,s,o),e},j=e=>typeof e=="boolean",pe=e=>e.type==="file",ee=e=>typeof e=="function",ce=e=>{if(!Ee)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},oe=e=>P(e)||$.isValidElement(e),Oe=e=>e.type==="radio",fe=e=>e instanceof RegExp;const qe={value:!1,isValid:!1},He={value:!0,isValid:!0};var Qe=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?He:{value:e[0].value,isValid:!0}:He:qe}return qe};const We={isValid:!1,value:null};var Xe=e=>Array.isArray(e)?e.reduce((i,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:i,We):We;function $e(e,i,s="validate"){if(oe(e)||Array.isArray(e)&&e.every(oe)||j(e)&&!e)return{type:s,message:oe(e)?e:"",ref:i}}var Y=e=>p(e)&&!fe(e)?e:{value:e,message:""},Ke=async(e,i,s,o,t)=>{const{ref:l,refs:h,required:g,maxLength:E,minLength:b,min:K,max:X,pattern:m,validate:v,name:T,valueAsNumber:he,mount:ae,disabled:ge}=e._f,A=f(i,T);if(!ae||ge)return{};const M=h?h[0]:l,q=_=>{o&&M.reportValidity&&(M.setCustomValidity(j(_)?"":_||""),M.reportValidity())},S={},re=Oe(l),te=ue(l),ve=re||te,B=(he||pe(l))&&k(l.value)&&k(A)||ce(l)&&l.value===""||A===""||Array.isArray(A)&&!A.length,z=_r.bind(null,T,s,S),H=(_,V,x,L=W.maxLength,R=W.minLength)=>{const I=_?V:x;S[T]={type:_?L:R,message:I,ref:l,...z(_?L:R,I)}};if(t?!Array.isArray(A)||!A.length:g&&(!ve&&(B||C(A))||j(A)&&!A||te&&!Qe(h).isValid||re&&!Xe(h).isValid)){const{value:_,message:V}=oe(g)?{value:!!g,message:g}:Y(g);if(_&&(S[T]={type:W.required,message:V,ref:M,...z(W.required,V)},!s))return q(V),S}if(!B&&(!C(K)||!C(X))){let _,V;const x=Y(X),L=Y(K);if(!C(A)&&!isNaN(A)){const R=l.valueAsNumber||A&&+A;C(x.value)||(_=R>x.value),C(L.value)||(V=R<L.value)}else{const R=l.valueAsDate||new Date(A),I=ie=>new Date(new Date().toDateString()+" "+ie),G=l.type=="time",se=l.type=="week";P(x.value)&&A&&(_=G?I(A)>I(x.value):se?A>x.value:R>new Date(x.value)),P(L.value)&&A&&(V=G?I(A)<I(L.value):se?A<L.value:R<new Date(L.value))}if((_||V)&&(H(!!_,x.message,L.message,W.max,W.min),!s))return q(S[T].message),S}if((E||b)&&!B&&(P(A)||t&&Array.isArray(A))){const _=Y(E),V=Y(b),x=!C(_.value)&&A.length>_.value,L=!C(V.value)&&A.length<V.value;if((x||L)&&(H(x,_.message,V.message),!s))return q(S[T].message),S}if(m&&!B&&P(A)){const{value:_,message:V}=Y(m);if(fe(_)&&!A.match(_)&&(S[T]={type:W.pattern,message:V,ref:l,...z(W.pattern,V)},!s))return q(V),S}if(v){if(ee(v)){const _=await v(A,i),V=$e(_,M);if(V&&(S[T]={...V,...z(W.validate,V.message)},!s))return q(V.message),S}else if(p(v)){let _={};for(const V in v){if(!U(_)&&!s)break;const x=$e(await v[V](A,i),M,V);x&&(_={...x,...z(V,x.message)},q(x.message),s&&(S[T]=_))}if(!U(_)&&(S[T]={ref:M,..._},!s))return S}}return q(!0),S};function wr(e,i){const s=i.slice(0,-1).length;let o=0;for(;o<s;)e=k(e)?o++:e[i[o++]];return e}function Fr(e){for(const i in e)if(!k(e[i]))return!1;return!0}function O(e,i){const s=Array.isArray(i)?i:Se(i)?[i]:Je(i),o=s.length===1?e:wr(e,s),t=s.length-1,l=s[t];return o&&delete o[l],t!==0&&(p(o)&&U(o)||Array.isArray(o)&&Fr(o))&&O(e,s.slice(0,-1)),e}function Fe(){let e=[];return{get observers(){return e},next:t=>{for(const l of e)l.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(l=>l!==t)}}),unsubscribe:()=>{e=[]}}}var de=e=>C(e)||!Ge(e);function Q(e,i){if(de(e)||de(i))return e===i;if(Z(e)&&Z(i))return e.getTime()===i.getTime();const s=Object.keys(e),o=Object.keys(i);if(s.length!==o.length)return!1;for(const t of s){const l=e[t];if(!o.includes(t))return!1;if(t!=="ref"){const h=i[t];if(Z(l)&&Z(h)||p(l)&&p(h)||Array.isArray(l)&&Array.isArray(h)?!Q(l,h):l!==h)return!1}}return!0}var Ye=e=>e.type==="select-multiple",xr=e=>Oe(e)||ue(e),xe=e=>ce(e)&&e.isConnected,Ze=e=>{for(const i in e)if(ee(e[i]))return!0;return!1};function ye(e,i={}){const s=Array.isArray(e);if(p(e)||s)for(const o in e)Array.isArray(e[o])||p(e[o])&&!Ze(e[o])?(i[o]=Array.isArray(e[o])?[]:{},ye(e[o],i[o])):C(e[o])||(i[o]=!0);return i}function je(e,i,s){const o=Array.isArray(e);if(p(e)||o)for(const t in e)Array.isArray(e[t])||p(e[t])&&!Ze(e[t])?k(i)||de(s[t])?s[t]=Array.isArray(e[t])?ye(e[t],[]):{...ye(e[t])}:je(e[t],C(i)?{}:i[t],s[t]):Q(e[t],i[t])?delete s[t]:s[t]=!0;return s}var De=(e,i)=>je(e,i,ye(i)),er=(e,{valueAsNumber:i,valueAsDate:s,setValueAs:o})=>k(e)?e:i?e===""?NaN:e&&+e:s&&P(e)?new Date(e):o?o(e):e;function ke(e){const i=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):i.disabled))return pe(i)?i.files:Oe(i)?Xe(e.refs).value:Ye(i)?[...i.selectedOptions].map(({value:s})=>s):ue(i)?Qe(e.refs).value:er(k(i.value)?e.ref.value:i.value,e)}var Dr=(e,i,s,o)=>{const t={};for(const l of e){const h=f(i,l);h&&w(t,l,h._f)}return{criteriaMode:s,names:[...e],fields:t,shouldUseNativeValidation:o}},ne=e=>k(e)?e:fe(e)?e.source:p(e)?fe(e.value)?e.value.source:e.value:e,kr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ze(e,i,s){const o=f(e,s);if(o||Se(s))return{error:o,name:s};const t=s.split(".");for(;t.length;){const l=t.join("."),h=f(i,l),g=f(e,l);if(h&&!Array.isArray(h)&&s!==l)return{name:s};if(g&&g.type)return{name:l,error:g};t.pop()}return{name:s}}var mr=(e,i,s,o,t)=>t.isOnAll?!1:!s&&t.isOnTouch?!(i||e):(s?o.isOnBlur:t.isOnBlur)?!e:(s?o.isOnChange:t.isOnChange)?e:!0,Er=(e,i)=>!le(f(e,i)).length&&O(e,i);const Sr={mode:N.onSubmit,reValidateMode:N.onChange,shouldFocusError:!0};function pr(e={},i){let s={...Sr,...e};const o=e.resetOptions&&e.resetOptions.keepDirtyValues;let t={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},h=p(s.defaultValues)?J(s.defaultValues)||{}:{},g=s.shouldUnregister?{}:J(h),E={action:!1,mount:!1,watch:!1},b={mount:new Set,unMount:new Set,array:new Set,watch:new Set},K,X=0;const m={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={watch:Fe(),array:Fe(),state:Fe()},T=Ie(s.mode),he=Ie(s.reValidateMode),ae=s.criteriaMode===N.all,ge=r=>n=>{clearTimeout(X),X=window.setTimeout(r,n)},A=async r=>{if(m.isValid||r){const n=s.resolver?U((await B()).errors):await H(l,!0);n!==t.isValid&&(t.isValid=n,v.state.next({isValid:n}))}},M=r=>m.isValidating&&v.state.next({isValidating:r}),q=(r,n=[],u,c,d=!0,a=!0)=>{if(c&&u){if(E.action=!0,a&&Array.isArray(f(l,r))){const y=u(f(l,r),c.argA,c.argB);d&&w(l,r,y)}if(a&&Array.isArray(f(t.errors,r))){const y=u(f(t.errors,r),c.argA,c.argB);d&&w(t.errors,r,y),Er(t.errors,r)}if(m.touchedFields&&a&&Array.isArray(f(t.touchedFields,r))){const y=u(f(t.touchedFields,r),c.argA,c.argB);d&&w(t.touchedFields,r,y)}m.dirtyFields&&(t.dirtyFields=De(h,g)),v.state.next({name:r,isDirty:V(r,n),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else w(g,r,n)},S=(r,n)=>{w(t.errors,r,n),v.state.next({errors:t.errors})},re=(r,n,u,c)=>{const d=f(l,r);if(d){const a=f(g,r,k(u)?f(h,r):u);k(a)||c&&c.defaultChecked||n?w(g,r,n?a:ke(d._f)):R(r,a),E.mount&&A()}},te=(r,n,u,c,d)=>{let a=!1,y=!1;const D={name:r};if(!u||c){m.isDirty&&(y=t.isDirty,t.isDirty=D.isDirty=V(),a=y!==D.isDirty);const F=Q(f(h,r),n);y=f(t.dirtyFields,r),F?O(t.dirtyFields,r):w(t.dirtyFields,r,!0),D.dirtyFields=t.dirtyFields,a=a||m.dirtyFields&&y!==!F}if(u){const F=f(t.touchedFields,r);F||(w(t.touchedFields,r,u),D.touchedFields=t.touchedFields,a=a||m.touchedFields&&F!==u)}return a&&d&&v.state.next(D),a?D:{}},ve=(r,n,u,c)=>{const d=f(t.errors,r),a=m.isValid&&j(n)&&t.isValid!==n;if(e.delayError&&u?(K=ge(()=>S(r,u)),K(e.delayError)):(clearTimeout(X),K=null,u?w(t.errors,r,u):O(t.errors,r)),(u?!Q(d,u):d)||!U(c)||a){const y={...c,...a&&j(n)?{isValid:n}:{},errors:t.errors,name:r};t={...t,...y},v.state.next(y)}M(!1)},B=async r=>await s.resolver(g,s.context,Dr(r||b.mount,l,s.criteriaMode,s.shouldUseNativeValidation)),z=async r=>{const{errors:n}=await B();if(r)for(const u of r){const c=f(n,u);c?w(t.errors,u,c):O(t.errors,u)}else t.errors=n;return n},H=async(r,n,u={valid:!0})=>{for(const c in r){const d=r[c];if(d){const{_f:a,...y}=d;if(a){const D=b.array.has(a.name),F=await Ke(d,g,ae,s.shouldUseNativeValidation,D);if(F[a.name]&&(u.valid=!1,n))break;!n&&(f(F,a.name)?D?br(t.errors,F,a.name):w(t.errors,a.name,F[a.name]):O(t.errors,a.name))}y&&await H(y,n,u)}}return u.valid},_=()=>{for(const r of b.unMount){const n=f(l,r);n&&(n._f.refs?n._f.refs.every(u=>!xe(u)):!xe(n._f.ref))&&Ae(r)}b.unMount=new Set},V=(r,n)=>(r&&n&&w(g,r,n),!Q(Ce(),h)),x=(r,n,u)=>Ar(r,b,{...E.mount?g:k(n)?h:P(r)?{[r]:n}:n},u,n),L=r=>le(f(E.mount?g:h,r,e.shouldUnregister?f(h,r,[]):[])),R=(r,n,u={})=>{const c=f(l,r);let d=n;if(c){const a=c._f;a&&(!a.disabled&&w(g,r,er(n,a)),d=ce(a.ref)&&C(n)?"":n,Ye(a.ref)?[...a.ref.options].forEach(y=>y.selected=d.includes(y.value)):a.refs?ue(a.ref)?a.refs.length>1?a.refs.forEach(y=>(!y.defaultChecked||!y.disabled)&&(y.checked=Array.isArray(d)?!!d.find(D=>D===y.value):d===y.value)):a.refs[0]&&(a.refs[0].checked=!!d):a.refs.forEach(y=>y.checked=y.value===d):pe(a.ref)?a.ref.value="":(a.ref.value=d,a.ref.type||v.watch.next({name:r})))}(u.shouldDirty||u.shouldTouch)&&te(r,d,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ie(r)},I=(r,n,u)=>{for(const c in n){const d=n[c],a=`${r}.${c}`,y=f(l,a);(b.array.has(r)||!de(d)||y&&!y._f)&&!Z(d)?I(a,d,u):R(a,d,u)}},G=(r,n,u={})=>{const c=f(l,r),d=b.array.has(r),a=J(n);w(g,r,a),d?(v.array.next({name:r,values:g}),(m.isDirty||m.dirtyFields)&&u.shouldDirty&&(t.dirtyFields=De(h,g),v.state.next({name:r,dirtyFields:t.dirtyFields,isDirty:V(r,a)}))):c&&!c._f&&!C(a)?I(r,a,u):R(r,a,u),Pe(r,b)&&v.state.next({}),v.watch.next({name:r}),!E.mount&&i()},se=async r=>{const n=r.target;let u=n.name;const c=f(l,u),d=()=>n.type?ke(c._f):fr(r);if(c){let a,y;const D=d(),F=r.type===Be.BLUR||r.type===Be.FOCUS_OUT,ar=!kr(c._f)&&!s.resolver&&!f(t.errors,u)&&!c._f.deps||mr(F,f(t.touchedFields,u),t.isSubmitted,he,T),_e=Pe(u,b,F);w(g,u,D),F?(c._f.onBlur&&c._f.onBlur(r),K&&K(0)):c._f.onChange&&c._f.onChange(r);const be=te(u,D,F,!1),or=!U(be)||_e;if(!F&&v.watch.next({name:u,type:r.type}),ar)return m.isValid&&A(),or&&v.state.next({name:u,..._e?{}:be});if(!F&&_e&&v.state.next({}),M(!0),s.resolver){const{errors:Me}=await B([u]),cr=ze(t.errors,l,u),Ne=ze(Me,l,cr.name||u);a=Ne.error,u=Ne.name,y=U(Me)}else a=(await Ke(c,g,ae,s.shouldUseNativeValidation))[u],a?y=!1:m.isValid&&(y=await H(l,!0));c._f.deps&&ie(c._f.deps),ve(u,y,a,be)}},ie=async(r,n={})=>{let u,c;const d=we(r);if(M(!0),s.resolver){const a=await z(k(r)?r:d);u=U(a),c=r?!d.some(y=>f(a,y)):u}else r?(c=(await Promise.all(d.map(async a=>{const y=f(l,a);return await H(y&&y._f?{[a]:y}:y)}))).every(Boolean),!(!c&&!t.isValid)&&A()):c=u=await H(l);return v.state.next({...!P(r)||m.isValid&&u!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:u}:{},errors:t.errors,isValidating:!1}),n.shouldFocus&&!c&&me(l,a=>a&&f(t.errors,a),r?d:b.mount),c},Ce=r=>{const n={...h,...E.mount?g:{}};return k(r)?n:P(r)?f(n,r):r.map(u=>f(n,u))},Le=(r,n)=>({invalid:!!f((n||t).errors,r),isDirty:!!f((n||t).dirtyFields,r),isTouched:!!f((n||t).touchedFields,r),error:f((n||t).errors,r)}),rr=r=>{r?we(r).forEach(n=>O(t.errors,n)):t.errors={},v.state.next({errors:t.errors})},tr=(r,n,u)=>{const c=(f(l,r,{_f:{}})._f||{}).ref;w(t.errors,r,{...n,ref:c}),v.state.next({name:r,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&c&&c.focus&&c.focus()},sr=(r,n)=>ee(r)?v.watch.subscribe({next:u=>r(x(void 0,n),u)}):x(r,n,!0),Ae=(r,n={})=>{for(const u of r?we(r):b.mount)b.mount.delete(u),b.array.delete(u),f(l,u)&&(n.keepValue||(O(l,u),O(g,u)),!n.keepError&&O(t.errors,u),!n.keepDirty&&O(t.dirtyFields,u),!n.keepTouched&&O(t.touchedFields,u),!s.shouldUnregister&&!n.keepDefaultValue&&O(h,u));v.watch.next({}),v.state.next({...t,...n.keepDirty?{isDirty:V()}:{}}),!n.keepIsValid&&A()},Ve=(r,n={})=>{let u=f(l,r);const c=j(n.disabled);return w(l,r,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:r}},name:r,mount:!0,...n}}),b.mount.add(r),u?c&&w(g,r,n.disabled?void 0:f(g,r,ke(u._f))):re(r,!0,n.value),{...c?{disabled:n.disabled}:{},...s.shouldUseNativeValidation?{required:!!n.required,min:ne(n.min),max:ne(n.max),minLength:ne(n.minLength),maxLength:ne(n.maxLength),pattern:ne(n.pattern)}:{},name:r,onChange:se,onBlur:se,ref:d=>{if(d){Ve(r,n),u=f(l,r);const a=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,y=xr(a),D=u._f.refs||[];if(y?D.find(F=>F===a):a===u._f.ref)return;w(l,r,{_f:{...u._f,...y?{refs:[...D.filter(xe),a,...Array.isArray(f(h,r))?[{}]:[]],ref:{type:a.type,name:r}}:{ref:a}}}),re(r,!1,void 0,a)}else u=f(l,r,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||n.shouldUnregister)&&!(yr(b.array,r)&&E.action)&&b.unMount.add(r)}}},Te=()=>s.shouldFocusError&&me(l,r=>r&&f(t.errors,r),b.mount),ir=(r,n)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=J(g);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:a}=await B();t.errors=d,c=a}else await H(l);U(t.errors)?(v.state.next({errors:{}}),await r(c,u)):(n&&await n({...t.errors},u),Te()),v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:U(t.errors),submitCount:t.submitCount+1,errors:t.errors})},nr=(r,n={})=>{f(l,r)&&(k(n.defaultValue)?G(r,f(h,r)):(G(r,n.defaultValue),w(h,r,n.defaultValue)),n.keepTouched||O(t.touchedFields,r),n.keepDirty||(O(t.dirtyFields,r),t.isDirty=n.defaultValue?V(r,f(h,r)):V()),n.keepError||(O(t.errors,r),m.isValid&&A()),v.state.next({...t}))},Re=(r,n={})=>{const u=r||h,c=J(u),d=r&&!U(r)?c:h;if(n.keepDefaultValues||(h=u),!n.keepValues){if(n.keepDirtyValues||o)for(const a of b.mount)f(t.dirtyFields,a)?w(d,a,f(g,a)):G(a,f(d,a));else{if(Ee&&k(r))for(const a of b.mount){const y=f(l,a);if(y&&y._f){const D=Array.isArray(y._f.refs)?y._f.refs[0]:y._f.ref;if(ce(D)){const F=D.closest("form");if(F){F.reset();break}}}}l={}}g=e.shouldUnregister?n.keepDefaultValues?J(h):{}:c,v.array.next({values:d}),v.watch.next({values:d})}b={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!E.mount&&i(),E.mount=!m.isValid||!!n.keepIsValid,E.watch=!!e.shouldUnregister,v.state.next({submitCount:n.keepSubmitCount?t.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?t.isDirty:!!(n.keepDefaultValues&&!Q(r,h)),isSubmitted:n.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:n.keepDirty||n.keepDirtyValues?t.dirtyFields:n.keepDefaultValues&&r?De(h,r):{},touchedFields:n.keepTouched?t.touchedFields:{},errors:n.keepErrors?t.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Ue=(r,n)=>Re(ee(r)?r(g):r,n),ur=(r,n={})=>{const u=f(l,r),c=u&&u._f;if(c){const d=c.refs?c.refs[0]:c.ref;d.focus&&(d.focus(),n.shouldSelect&&d.select())}},lr=r=>{t={...t,...r}};return ee(s.defaultValues)&&s.defaultValues().then(r=>{Ue(r,s.resetOptions),v.state.next({isLoading:!1})}),{control:{register:Ve,unregister:Ae,getFieldState:Le,_executeSchema:B,_focusError:Te,_getWatch:x,_getDirty:V,_updateValid:A,_removeUnmounted:_,_updateFieldArray:q,_getFieldArray:L,_reset:Re,_updateFormState:lr,_subjects:v,_proxyFormState:m,get _fields(){return l},get _formValues(){return g},get _stateFlags(){return E},set _stateFlags(r){E=r},get _defaultValues(){return h},get _names(){return b},set _names(r){b=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ie,register:Ve,handleSubmit:ir,watch:sr,setValue:G,getValues:Ce,reset:Ue,resetField:nr,clearErrors:rr,unregister:Ae,setError:tr,setFocus:ur,getFieldState:Le}}function Cr(e={}){const i=$.useRef(),[s,o]=$.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:ee(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...pr(e,()=>o(l=>({...l}))),formState:s});const t=i.current.control;return t._options=e,vr({subject:t._subjects.state,next:l=>{gr(l,t._proxyFormState,t._updateFormState,!0)&&o({...t._formState})}}),$.useEffect(()=>{t._stateFlags.mount||(t._updateValid(),t._stateFlags.mount=!0),t._stateFlags.watch&&(t._stateFlags.watch=!1,t._subjects.state.next({})),t._removeUnmounted()}),$.useEffect(()=>{e.values&&!Q(e.values,t._defaultValues)&&t._reset(e.values,t._options.resetOptions)},[e.values,t]),$.useEffect(()=>{s.submitCount&&t._focusError()},[t,s.submitCount]),i.current.formState=hr(s,t),i.current}export{Cr as u};
